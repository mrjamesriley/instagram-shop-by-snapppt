<!DOCTYPE html>
<html>
<head>
  <title>Insert Snapppt Embed</title>

  <!-- Disable browser caching of dialog window to prevent issues with TinyMCE creating the dialog -->
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="pragma" content="no-cache" />

  <style>
    body { font-family: sans-serif; font-size: 1.1em; color: #222; }
    input[type="text"] { padding: 4px 6px; }
    input[type="submit"] { padding: 4px; font-size: 1.2em; }
    input, select, textarea { border:1px solid #dfdfdf; }

    #snapppt-embed-type-select {
      float: right;
      width: 150px;
      font-size: 14px;
      outline: none;
    }

    #snapppt-embed-action-buttons {
      clear: both;
      margin-top: 12px;
    }

    .snapppt-shortcode-button {
      display: inline-block;
      text-decoration: none;
      border: 1px solid #adadad;
      margin: 0;
      padding: 0 10px 1px;
      font-size: 13px;
      height: 24px;
      line-height: 22px;
      color: #333;
      cursor: pointer;
      -webkit-border-radius: 3px;
      -webkit-appearance: none;
      border-radius: 3px;
      white-space: nowrap;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      background: #fafafa;
      background-image: -webkit-gradient(linear, left top, left bottom, from(#fafafa), to(#e9e9e9));
      background-image: -webkit-linear-gradient(top, #fafafa, #e9e9e9);
      background-image: -moz-linear-gradient(top, #fafafa, #e9e9e9);
      background-image: -o-linear-gradient(top, #fafafa, #e9e9e9);
      background-image: linear-gradient(to bottom, #fafafa, #e9e9e9);

      text-shadow: 0 1px 0 #fff;
      -webkit-box-shadow: inset 0 1px 0 #fff;
      -moz-box-shadow: inset 0 1px 0 #fff;
      box-shadow: inset 0 1px 0 #fff;
    }

    #insert-snapppt-shortcode {
      background: #2ea2cc;
      background: -webkit-gradient(linear, left top, left bottom, from(#2ea2cc), to(#1e8cbe));
      background: -webkit-linear-gradient(top, #2ea2cc 0%,#1e8cbe 100%);
      background: linear-gradient(top, #2ea2cc 0%,#1e8cbe 100%);
      filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2ea2cc', endColorstr='#1e8cbe',GradientType=0 );
      border-color: #0074a2;
      -webkit-box-shadow: inset 0 1px 0 rgba(120,200,230,0.5);
      box-shadow: inset 0 1px 0 rgba(120,200,230,0.5);
      color: #fff;
      text-decoration: none;
      text-shadow: 0 1px 0 rgba(0,86,132,0.7);
    }

  </style>

</head>

<body>

  <select id="snapppt-embed-type-select">
    <option value="grid">Grid</option>
    <option value="carousel">Carousel</option>
  </select>

  <label>Select Embed Type</label>

  <div id="snapppt-embed-action-buttons" >
    <div style="float: left">
      <button class="snapppt-shortcode-button" id="close-snapppt-shortcode">Cancel</button>
    </div>

    <div style="float: right">
      <button class="snapppt-shortcode-button" id="insert-snapppt-shortcode">Insert</button>
    </div>
  </div>

  <script>
    var passed_arguments = top.tinymce.activeEditor.windowManager.getParams();
    var jQuery = passed_arguments.jQuery;
    var jqContext = document.getElementsByTagName('body')[0];

    function closeSnappptShortcodeDialog() {
      top.tinymce.activeEditor.windowManager.close()
    }

    function insertSnappptShortcode() {
      var embedTypeSelected = document.getElementById('snapppt-embed-type-select').value
      window.parent.send_to_editor('[snapppt_embed embed_type="' + embedTypeSelected + '"]')
      closeSnappptShortcodeDialog()
    }

    jQuery('#insert-snapppt-shortcode', jqContext).click(function(event) {
      event.preventDefault();
      insertSnappptShortcode();
    })

    jQuery('#close-snapppt-shortcode', jqContext).click(function(event) {
      event.preventDefault();
      closeSnappptShortcodeDialog();
    })
  </script>

</body>
</html>
